package com.yulore.bangmiaopa;

import java.io.*;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.charset.Charset;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Map;
import java.util.Set;
import java.util.TreeMap;

public class CuiShouDemoMd5 {

    /**
     * api key
     * 请换成电话邦提供的apikey
     */
    private static final String apikey = "";
    /**
     * secret
     * 请换成电话邦提供的appsecret
     */
    private static final String appsecret = "";
    /**
     * 超时时间
     */
    private static final int TIME_OUT = 10 * 1000;
    /**
     * content type
     */
    private static final String HEADER_CONTENT_TYPE = "Content-Type";
    /**
     * 编码格式
     */
    private static final String DEFAULT_PARAMS_ENCODING = "UTF-8";

    public static void main(String[] args) {
        String time = (System.currentTimeMillis() / 1000) + "";
        String url = "https://cuishou-api.dianhua.cn/busi/genCuiShou?apikey=" + apikey + "&time=" + time + "&encrypt=1";
        Map<String, String> map = new TreeMap<>();
        map.put("apikey", apikey);
        map.put("time", time);
        map.put("encrypt", "1");
        String sig = Signature(map, appsecret);
        // 得到api请求url
        String sigUrl = url + "&sig=" + sig;
        request(sigUrl);
    }

    /**
     * 编码
     *
     * @return
     */
    private static String getParamsEncoding() {
        return DEFAULT_PARAMS_ENCODING;
    }

    /**
     * 获取ContentType
     *
     * @return
     */
    private static String getBodyContentType() {
        return "application/json; charset=" + getParamsEncoding();
    }

    private static String Signature(Map map, String appsecret) {
        String sig_str = "";

        Set<String> keySet = map.keySet();
        for (String s : keySet) {
            sig_str = sig_str + s + map.get(s);
        }
        sig_str = appsecret + sig_str + appsecret;
        return SHA1(sig_str);
    }

    private static String SHA1(String s) {
        try {
            MessageDigest digest = MessageDigest.getInstance("SHA-1");
            digest.update(s.getBytes(Charset.forName("UTF-8")));
            byte messageDigest[] = digest.digest();
            StringBuffer hexString = new StringBuffer();
            for (int i = 0; i < messageDigest.length; i++) {
                String shaHex = Integer.toHexString(messageDigest[i] & 0xFF);
                if (shaHex.length() < 2) {
                    hexString.append(0);
                }
                hexString.append(shaHex);
            }
            return hexString.toString();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
        return null;
    }

    private static void request(String url) {
        try {
            URL parsedUrl = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) parsedUrl.openConnection();
            connection.setConnectTimeout(TIME_OUT);
            connection.setReadTimeout(TIME_OUT);
            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setRequestMethod("POST");
            connection.addRequestProperty(HEADER_CONTENT_TYPE, getBodyContentType());
            connection.setDoOutput(true);
            String bodyStr = "{\"tel\":\"15652297411\",\"time\":1516933710,\"call_log\":[{\"call_method\":\"2\",\"call_duration\":\"49\",\"call_time\":\"1516779825\",\"call_tel\":\"65f6149b891640d05ec826d9728b5fdc\"},{\"call_method\":\"2\",\"call_duration\":\"79\",\"call_time\":\"1516415863\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"10\",\"call_time\":\"1516333526\",\"call_tel\":\"e413281c5020d36dce03cf8d2ba40e4f\"},{\"call_method\":\"2\",\"call_duration\":\"17\",\"call_time\":\"1516241002\",\"call_tel\":\"6a16cd003db57b109f29357ffedde179\"},{\"call_method\":\"2\",\"call_duration\":\"31\",\"call_time\":\"1516170165\",\"call_tel\":\"4f38b54db392143a7aac0982b5d1dee7\"},{\"call_method\":\"1\",\"call_duration\":\"368\",\"call_time\":\"1515925308\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"15\",\"call_time\":\"1515894179\",\"call_tel\":\"0e98888f3862c8b75f24034f359ce129\"},{\"call_method\":\"1\",\"call_duration\":\"245\",\"call_time\":\"1515840316\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"73\",\"call_time\":\"1515805866\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"94\",\"call_time\":\"1515800728\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"7\",\"call_time\":\"1515638331\",\"call_tel\":\"98c8ccecb8426cd9e7424d35c43168bc\"},{\"call_method\":\"2\",\"call_duration\":\"35\",\"call_time\":\"1515580183\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"22\",\"call_time\":\"1515491891\",\"call_tel\":\"5a737215fcd84ed075c67d7b90099913\"},{\"call_method\":\"2\",\"call_duration\":\"11\",\"call_time\":\"1515409088\",\"call_tel\":\"7e2c915f67786618885a08390b1370e7\"},{\"call_method\":\"1\",\"call_duration\":\"154\",\"call_time\":\"1515322084\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"13\",\"call_time\":\"1515216765\",\"call_tel\":\"8f6db9c9ef7597ae1258fb7c6cb3d3bb\"},{\"call_method\":\"2\",\"call_duration\":\"11\",\"call_time\":\"1515207104\",\"call_tel\":\"b8c05a6d6caa5287511cf22cf9ef7d70\"},{\"call_method\":\"2\",\"call_duration\":\"12\",\"call_time\":\"1515203019\",\"call_tel\":\"43750458230da62b177ba8efc4712b01\"},{\"call_method\":\"2\",\"call_duration\":\"7\",\"call_time\":\"1515027989\",\"call_tel\":\"f524e4a9bdd2668a0afc2393f2ae37ca\"},{\"call_method\":\"2\",\"call_duration\":\"16\",\"call_time\":\"1514971208\",\"call_tel\":\"b426945ad16836af0b4a4633538dee5a\"},{\"call_method\":\"2\",\"call_duration\":\"38\",\"call_time\":\"1514854926\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"25\",\"call_time\":\"1514809084\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"214\",\"call_time\":\"1514808792\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"18\",\"call_time\":\"1514806466\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"38\",\"call_time\":\"1514799379\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"24\",\"call_time\":\"1514791585\",\"call_tel\":\"846e9c453078512563167b091c1ac596\"},{\"call_method\":\"1\",\"call_duration\":\"67\",\"call_time\":\"1514783638\",\"call_tel\":\"433595e77d397bd883b70293b331dd9a\"},{\"call_method\":\"2\",\"call_duration\":\"21\",\"call_time\":\"1514707996\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"29\",\"call_time\":\"1514707859\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"23\",\"call_time\":\"1514634553\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"23\",\"call_time\":\"1514631480\",\"call_tel\":\"3d4356c05023c2085c50b4bc110deef3\"},{\"call_method\":\"2\",\"call_duration\":\"19\",\"call_time\":\"1514630948\",\"call_tel\":\"3d4356c05023c2085c50b4bc110deef3\"},{\"call_method\":\"1\",\"call_duration\":\"75\",\"call_time\":\"1514628553\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"52\",\"call_time\":\"1514627244\",\"call_tel\":\"3d4356c05023c2085c50b4bc110deef3\"},{\"call_method\":\"2\",\"call_duration\":\"79\",\"call_time\":\"1514616702\",\"call_tel\":\"433595e77d397bd883b70293b331dd9a\"},{\"call_method\":\"2\",\"call_duration\":\"85\",\"call_time\":\"1514609765\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"54\",\"call_time\":\"1514609134\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"2\",\"call_duration\":\"7\",\"call_time\":\"1514601492\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"39\",\"call_time\":\"1514598047\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"103\",\"call_time\":\"1514596084\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"51\",\"call_time\":\"1514553574\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"65\",\"call_time\":\"1514544393\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"91\",\"call_time\":\"1514436901\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"7\",\"call_time\":\"1514364304\",\"call_tel\":\"4c94b38dccc5a9943f0dff69648cce50\"},{\"call_method\":\"2\",\"call_duration\":\"29\",\"call_time\":\"1514253744\",\"call_tel\":\"e8ab9c2d040cf66ba23be49002014cb2\"},{\"call_method\":\"2\",\"call_duration\":\"155\",\"call_time\":\"1514247097\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"38\",\"call_time\":\"1514116610\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"61\",\"call_time\":\"1514115372\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"121\",\"call_time\":\"1514079295\",\"call_tel\":\"e4570db7fa20d2b13cbd825a893fda8b\"},{\"call_method\":\"1\",\"call_duration\":\"62\",\"call_time\":\"1514029055\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"55\",\"call_time\":\"1513956156\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"63\",\"call_time\":\"1513955256\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"35\",\"call_time\":\"1513942077\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"62\",\"call_time\":\"1513852271\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"8\",\"call_time\":\"1513826821\",\"call_tel\":\"20b62c8a5c5bf329764ab77f1d957b0a\"},{\"call_method\":\"2\",\"call_duration\":\"109\",\"call_time\":\"1513744935\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"11\",\"call_time\":\"1513742115\",\"call_tel\":\"8b3fc1edeaa9912e733aceef40426462\"},{\"call_method\":\"2\",\"call_duration\":\"14\",\"call_time\":\"1513737756\",\"call_tel\":\"503ea9a27939d3561bd73c48875e68b9\"},{\"call_method\":\"2\",\"call_duration\":\"113\",\"call_time\":\"1513727296\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"36\",\"call_time\":\"1513686816\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"14\",\"call_time\":\"1513652216\",\"call_tel\":\"4a2b9526a294cd8fbb92702ee643f911\"},{\"call_method\":\"1\",\"call_duration\":\"75\",\"call_time\":\"1513570838\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"102\",\"call_time\":\"1513570714\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"29\",\"call_time\":\"1513515345\",\"call_tel\":\"8b71937a37e6833f89470b8e19c08057\"},{\"call_method\":\"2\",\"call_duration\":\"72\",\"call_time\":\"1513325140\",\"call_tel\":\"317ad40af868ce71a00bdf2e65fb447e\"},{\"call_method\":\"1\",\"call_duration\":\"15\",\"call_time\":\"1513148932\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"35\",\"call_time\":\"1513076744\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"27\",\"call_time\":\"1513051582\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"18\",\"call_time\":\"1512993875\",\"call_tel\":\"0e98888f3862c8b75f24034f359ce129\"},{\"call_method\":\"1\",\"call_duration\":\"153\",\"call_time\":\"1512987290\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"8\",\"call_time\":\"1512870598\",\"call_tel\":\"43750458230da62b177ba8efc4712b01\"},{\"call_method\":\"1\",\"call_duration\":\"120\",\"call_time\":\"1512804540\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"80\",\"call_time\":\"1512727855\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"1\",\"call_time\":\"1512608983\",\"call_tel\":\"f925fa6eee942abb2cc593ced57fd4e9\"},{\"call_method\":\"2\",\"call_duration\":\"23\",\"call_time\":\"1512549212\",\"call_tel\":\"2f45c1014f0dab68964f53ac6392d94c\"},{\"call_method\":\"2\",\"call_duration\":\"22\",\"call_time\":\"1512475157\",\"call_tel\":\"2f45c1014f0dab68964f53ac6392d94c\"},{\"call_method\":\"2\",\"call_duration\":\"9\",\"call_time\":\"1512378947\",\"call_tel\":\"e48b08317f5ab9e4979ead867060cd44\"},{\"call_method\":\"2\",\"call_duration\":\"460\",\"call_time\":\"1512261247\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"162\",\"call_time\":\"1512172539\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"35\",\"call_time\":\"1511933971\",\"call_tel\":\"523ce731ddb781a477968383a9a60d2e\"},{\"call_method\":\"2\",\"call_duration\":\"214\",\"call_time\":\"1511779535\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"13\",\"call_time\":\"1511753454\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"2\",\"call_duration\":\"447\",\"call_time\":\"1511652389\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"36\",\"call_time\":\"1511649765\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"67\",\"call_time\":\"1511615758\",\"call_tel\":\"802bc412f195a906620c37e0086d2858\"},{\"call_method\":\"2\",\"call_duration\":\"11\",\"call_time\":\"1511573501\",\"call_tel\":\"43750458230da62b177ba8efc4712b01\"},{\"call_method\":\"2\",\"call_duration\":\"51\",\"call_time\":\"1511535059\",\"call_tel\":\"47147202939e09c2390246a4b6ad3dd9\"},{\"call_method\":\"2\",\"call_duration\":\"45\",\"call_time\":\"1511522449\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"2\",\"call_duration\":\"13\",\"call_time\":\"1511522222\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"1\",\"call_duration\":\"11\",\"call_time\":\"1511521915\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"1\",\"call_duration\":\"270\",\"call_time\":\"1511518827\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"20\",\"call_time\":\"1511518738\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"2\",\"call_duration\":\"51\",\"call_time\":\"1511518512\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"1\",\"call_duration\":\"81\",\"call_time\":\"1511512766\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"384\",\"call_time\":\"1511434209\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"144\",\"call_time\":\"1511431439\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"2\",\"call_duration\":\"10\",\"call_time\":\"1511420683\",\"call_tel\":\"cbffd294048b0915e827ae4b9c5edeef\"},{\"call_method\":\"2\",\"call_duration\":\"165\",\"call_time\":\"1511394587\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"278\",\"call_time\":\"1511308018\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"400\",\"call_time\":\"1511273506\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"628\",\"call_time\":\"1511272850\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"14\",\"call_time\":\"1511272798\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"8\",\"call_time\":\"1511270711\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"42\",\"call_time\":\"1511170450\",\"call_tel\":\"056267227b82771c39505b22cae78a45\"},{\"call_method\":\"2\",\"call_duration\":\"172\",\"call_time\":\"1511133805\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"360\",\"call_time\":\"1511088642\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"453\",\"call_time\":\"1510999237\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"290\",\"call_time\":\"1510875397\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"101\",\"call_time\":\"1510838079\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"190\",\"call_time\":\"1510804922\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"217\",\"call_time\":\"1510742774\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"50\",\"call_time\":\"1510742546\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"1181\",\"call_time\":\"1510671529\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"218\",\"call_time\":\"1510572239\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"143\",\"call_time\":\"1510448844\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"12\",\"call_time\":\"1510405629\",\"call_tel\":\"0e98888f3862c8b75f24034f359ce129\"},{\"call_method\":\"1\",\"call_duration\":\"33\",\"call_time\":\"1510403026\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"1\",\"call_time\":\"1510403011\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"420\",\"call_time\":\"1510397399\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"15\",\"call_time\":\"1510315073\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"33\",\"call_time\":\"1510314906\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"79\",\"call_time\":\"1510143463\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"87\",\"call_time\":\"1510034940\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"10\",\"call_time\":\"1509940041\",\"call_tel\":\"13c6a64e476563edc6aefd60f9fac327\"},{\"call_method\":\"1\",\"call_duration\":\"1112\",\"call_time\":\"1509884371\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"103\",\"call_time\":\"1509870465\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"62\",\"call_time\":\"1509865116\",\"call_tel\":\"846e9c453078512563167b091c1ac596\"},{\"call_method\":\"1\",\"call_duration\":\"69\",\"call_time\":\"1509792843\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"1\",\"call_duration\":\"155\",\"call_time\":\"1509792622\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"1\",\"call_duration\":\"28\",\"call_time\":\"1509792491\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"409\",\"call_time\":\"1509791969\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"7\",\"call_time\":\"1509789283\",\"call_tel\":\"57b7ae3489ec83fe43635278519b29bc\"},{\"call_method\":\"1\",\"call_duration\":\"88\",\"call_time\":\"1509752852\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"129\",\"call_time\":\"1509708604\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"40\",\"call_time\":\"1509550568\",\"call_tel\":\"95b6dcd3b1ce8c38aef52c46bd10a8b4\"},{\"call_method\":\"2\",\"call_duration\":\"14\",\"call_time\":\"1509550178\",\"call_tel\":\"6088b7a29cddd8812b28c88c69f0be92\"},{\"call_method\":\"1\",\"call_duration\":\"120\",\"call_time\":\"1509532214\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"53\",\"call_time\":\"1509530225\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"49\",\"call_time\":\"1509503020\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"36\",\"call_time\":\"1509501639\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"14\",\"call_time\":\"1509490625\",\"call_tel\":\"433595e77d397bd883b70293b331dd9a\"},{\"call_method\":\"2\",\"call_duration\":\"44\",\"call_time\":\"1509441303\",\"call_tel\":\"fdb1eb00d402c08fc153ff68b267cdba\"},{\"call_method\":\"2\",\"call_duration\":\"17\",\"call_time\":\"1509441156\",\"call_tel\":\"57b7ae3489ec83fe43635278519b29bc\"},{\"call_method\":\"1\",\"call_duration\":\"25\",\"call_time\":\"1509432762\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"583\",\"call_time\":\"1509423120\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"96\",\"call_time\":\"1509416330\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"200\",\"call_time\":\"1509408304\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"18\",\"call_time\":\"1509335377\",\"call_tel\":\"6251faeb57f0588708ed436cbf998de9\"},{\"call_method\":\"1\",\"call_duration\":\"455\",\"call_time\":\"1509274680\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"28\",\"call_time\":\"1509251011\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"1\",\"call_duration\":\"323\",\"call_time\":\"1509164743\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"29\",\"call_time\":\"1509153461\",\"call_tel\":\"f030ed899c40dbaced9bcfd4d829c722\"},{\"call_method\":\"2\",\"call_duration\":\"54\",\"call_time\":\"1509088222\",\"call_tel\":\"37f4d71a3288993c94013326073066e9\"},{\"call_method\":\"2\",\"call_duration\":\"120\",\"call_time\":\"1509063678\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"76\",\"call_time\":\"1509014906\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"240\",\"call_time\":\"1508934379\",\"call_tel\":\"0c6c14b28ef7d1be1b09fba775982053\"},{\"call_method\":\"2\",\"call_duration\":\"32\",\"call_time\":\"1508762713\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"641\",\"call_time\":\"1508669631\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"978\",\"call_time\":\"1508668489\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"41\",\"call_time\":\"1508647310\",\"call_tel\":\"01527ded5969c3a08ddf9a79fa46da32\"},{\"call_method\":\"1\",\"call_duration\":\"482\",\"call_time\":\"1508065309\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"79\",\"call_time\":\"1508032561\",\"call_tel\":\"846e9c453078512563167b091c1ac596\"},{\"call_method\":\"1\",\"call_duration\":\"76\",\"call_time\":\"1507986392\",\"call_tel\":\"846e9c453078512563167b091c1ac596\"},{\"call_method\":\"1\",\"call_duration\":\"85\",\"call_time\":\"1507974745\",\"call_tel\":\"846e9c453078512563167b091c1ac596\"},{\"call_method\":\"2\",\"call_duration\":\"76\",\"call_time\":\"1507962847\",\"call_tel\":\"ab19da8a1bf328cb2131d96488080e84\"},{\"call_method\":\"1\",\"call_duration\":\"200\",\"call_time\":\"1507955557\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"161\",\"call_time\":\"1507782034\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"146\",\"call_time\":\"1507729080\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"17\",\"call_time\":\"1507719503\",\"call_tel\":\"0e98888f3862c8b75f24034f359ce129\"},{\"call_method\":\"1\",\"call_duration\":\"21\",\"call_time\":\"1507676958\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"66\",\"call_time\":\"1507638267\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"220\",\"call_time\":\"1507637349\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"29\",\"call_time\":\"1507635402\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"46\",\"call_time\":\"1507629055\",\"call_tel\":\"8db8ccc0568cd4022be4bf249a912733\"},{\"call_method\":\"1\",\"call_duration\":\"45\",\"call_time\":\"1507623241\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"25\",\"call_time\":\"1507623204\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"40\",\"call_time\":\"1507622070\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"54\",\"call_time\":\"1507615591\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"4\",\"call_time\":\"1507539664\",\"call_tel\":\"a21ebd166ccd39d0d5f57f26760a6cb2\"},{\"call_method\":\"1\",\"call_duration\":\"129\",\"call_time\":\"1507458742\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"2\",\"call_duration\":\"13\",\"call_time\":\"1507453628\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"37\",\"call_time\":\"1507453409\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"15\",\"call_time\":\"1507453299\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"145\",\"call_time\":\"1507452412\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"43\",\"call_time\":\"1507451732\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"20\",\"call_time\":\"1507435641\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"9\",\"call_time\":\"1507431376\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"83\",\"call_time\":\"1507369887\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"84\",\"call_time\":\"1507279240\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"24\",\"call_time\":\"1507263770\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"42\",\"call_time\":\"1507263539\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"80\",\"call_time\":\"1507179358\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"12\",\"call_time\":\"1507172726\",\"call_tel\":\"8db8ccc0568cd4022be4bf249a912733\"},{\"call_method\":\"1\",\"call_duration\":\"57\",\"call_time\":\"1507171097\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"45\",\"call_time\":\"1507170950\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"36\",\"call_time\":\"1507170462\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"27\",\"call_time\":\"1507169763\",\"call_tel\":\"4dc87d2bfa865a4268f18d117de0e9d4\"},{\"call_method\":\"2\",\"call_duration\":\"23\",\"call_time\":\"1507168476\",\"call_tel\":\"4dc87d2bfa865a4268f18d117de0e9d4\"},{\"call_method\":\"1\",\"call_duration\":\"34\",\"call_time\":\"1507168013\",\"call_tel\":\"f7cddc11a21844d967667bcd1d26df1e\"},{\"call_method\":\"2\",\"call_duration\":\"45\",\"call_time\":\"1507167931\",\"call_tel\":\"4dc87d2bfa865a4268f18d117de0e9d4\"},{\"call_method\":\"2\",\"call_duration\":\"13\",\"call_time\":\"1507163489\",\"call_tel\":\"4dc87d2bfa865a4268f18d117de0e9d4\"},{\"call_method\":\"1\",\"call_duration\":\"11\",\"call_time\":\"1507163274\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"2\",\"call_duration\":\"51\",\"call_time\":\"1507162715\",\"call_tel\":\"8db8ccc0568cd4022be4bf249a912733\"},{\"call_method\":\"2\",\"call_duration\":\"23\",\"call_time\":\"1507160647\",\"call_tel\":\"8db8ccc0568cd4022be4bf249a912733\"},{\"call_method\":\"2\",\"call_duration\":\"25\",\"call_time\":\"1507160607\",\"call_tel\":\"8db8ccc0568cd4022be4bf249a912733\"},{\"call_method\":\"2\",\"call_duration\":\"10\",\"call_time\":\"1507160251\",\"call_tel\":\"7f324a2c62ae2ad15039d79455cead0f\"},{\"call_method\":\"1\",\"call_duration\":\"39\",\"call_time\":\"1507159869\",\"call_tel\":\"de573750ae20c694d89f96b3129dbb46\"},{\"call_method\":\"2\",\"call_duration\":\"54\",\"call_time\":\"1507158710\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"31\",\"call_time\":\"1507158658\",\"call_tel\":\"7f324a2c62ae2ad15039d79455cead0f\"},{\"call_method\":\"2\",\"call_duration\":\"52\",\"call_time\":\"1507158231\",\"call_tel\":\"7f324a2c62ae2ad15039d79455cead0f\"},{\"call_method\":\"2\",\"call_duration\":\"520\",\"call_time\":\"1507117503\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"175\",\"call_time\":\"1507114349\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"56\",\"call_time\":\"1507107362\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"60\",\"call_time\":\"1507096883\",\"call_tel\":\"da96d411a11736b2ac5a7ed5e40e1ae1\"},{\"call_method\":\"1\",\"call_duration\":\"74\",\"call_time\":\"1507091555\",\"call_tel\":\"d1dbf908b2f49f67788cfe65a69e1e26\"},{\"call_method\":\"1\",\"call_duration\":\"40\",\"call_time\":\"1507091031\",\"call_tel\":\"5cffb802573b8a6ef464c7c77d9fb9fe\"},{\"call_method\":\"1\",\"call_duration\":\"27\",\"call_time\":\"1507090819\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"1\",\"call_duration\":\"36\",\"call_time\":\"1507029222\",\"call_tel\":\"d1dbf908b2f49f67788cfe65a69e1e26\"},{\"call_method\":\"1\",\"call_duration\":\"139\",\"call_time\":\"1507028597\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"2\",\"call_duration\":\"1\",\"call_time\":\"1507026514\",\"call_tel\":\"d1dbf908b2f49f67788cfe65a69e1e26\"},{\"call_method\":\"2\",\"call_duration\":\"17\",\"call_time\":\"1507024096\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"38\",\"call_time\":\"1507022771\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"46\",\"call_time\":\"1507022497\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"39\",\"call_time\":\"1507004978\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"22\",\"call_time\":\"1507004785\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"},{\"call_method\":\"1\",\"call_duration\":\"11\",\"call_time\":\"1507004376\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"61\",\"call_time\":\"1507003751\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"54\",\"call_time\":\"1507000744\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"39\",\"call_time\":\"1506997392\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"43\",\"call_time\":\"1506994435\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"55\",\"call_time\":\"1506990086\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"53\",\"call_time\":\"1506939300\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"28\",\"call_time\":\"1506924019\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"2\",\"call_duration\":\"117\",\"call_time\":\"1506919227\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"13\",\"call_time\":\"1506916486\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"10\",\"call_time\":\"1506901119\",\"call_tel\":\"af083da2ac6de946cecc4063160705a4\"},{\"call_method\":\"1\",\"call_duration\":\"6\",\"call_time\":\"1506855803\",\"call_tel\":\"26640b32dff0ce7d29de7575b1d6d715\"}]}";
            byte[] body = bodyStr.getBytes(DEFAULT_PARAMS_ENCODING);
            DataOutputStream out = new DataOutputStream(connection.getOutputStream());
            out.write(body);
            out.close();
            connection.connect();
            int responseCode = connection.getResponseCode();
            System.out.println("response code: " + responseCode);
            if (responseCode != HttpURLConnection.HTTP_OK) {
                System.out.println("response code not ok");
                String responseData = getContent(connection.getErrorStream());
                System.out.println("response data: " + responseData);
            } else {
                System.out.println("response code ok");
                String responseData = getContent(connection.getInputStream());
                System.out.println("response data: " + responseData);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static String getContent(InputStream in) {
        StringBuffer sb = new StringBuffer();
        BufferedReader br = null;
        try {
            br = new BufferedReader(new InputStreamReader(in, "utf-8"));
            String line;
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)
                    br.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
}
